datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id               Int                @id @default(autoincrement())
  email            String             @unique
  passwordHash     String
  role             UserRole           @default(POSTULANTE)
  fullName         String
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt

  PostulantePerfil PostulantePerfil?
}

model PostulantePerfil {
  id            Int      @id @default(autoincrement())
  userId        Int      @unique
  cvTexto       String?
  cvEmbedding   Bytes?
  carrera       String?
  ciudad        String?
  semestre      Int?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  user          User     @relation(fields: [userId], references: [id])
}

model JobOffer {
  id            Int        @id @default(autoincrement())
  titulo        String
  empresa       String
  ubicacion     String?
  modalidad     String?
  descripcion   String
  fuente        String
  urlOriginal   String?
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
}

enum UserRole {
  POSTULANTE
  RECLUTADOR
  ADMIN
}
